const MARGIN=80,MIN_PATH_DIST=150,RANDOM_DIST_FACT=.08,ANIMATION_TIME=2e3,RANDOM_POSIBILITY=.1,INTERVAL=200,CURSOR_SIZE=50,COLOR="#ffe600",CHANGE_COLOR_AT=5,MAX_EFFECT_DISTANCE=60;function initAnimatedElements(){const t=[],n=document.getElementsByClassName("animated");for(const o of n)t.push(new AnimatedElement(o));return t.forEach(t=>t.startAnimation()),t}function initSnap(t,n,o,e){const r=Snap();return r.appendTo(t),r.node.classList.add("svg-background"),r.node.style.position="absolute",e?(r.node.style.top="-"+(2*MARGIN+o)+"px",r.node.style.left="-"+(2*MARGIN+n)+"px"):(r.node.style.top="-"+MARGIN+"px",r.node.style.left="-"+MARGIN+"px"),r.node.style.width=n+2*MARGIN+"px",r.node.style.height=o+2*MARGIN+"px",r.node.style.zIndex="-1",r}function initCurveEnds(t,n){const o=[],e=Math.max(Math.floor(t/MIN_PATH_DIST),1),r=Math.max(Math.floor(n/MIN_PATH_DIST),1);for(var s=0;s<e;s++)o.push([MARGIN+(s+.5)*t/e,MARGIN,t/e]);for(s=0;s<r;s++)o.push([MARGIN+t,MARGIN+(s+.5)*n/r,n/r]);for(s=0;s<e;s++)o.push([MARGIN+(e-(s+.5))*t/e,MARGIN+n,t/e]);for(s=0;s<r;s++)o.push([MARGIN,MARGIN+(r-(s+.5))*n/r,n/r]);return o.map(t=>[Math.floor(t[0]),Math.floor(t[1]),Math.floor(t[2])])}function initCurveControlPoints(t,n){const o=[],e=Math.max(Math.floor(t/MIN_PATH_DIST),1),r=Math.max(Math.floor(n/MIN_PATH_DIST),1);for(var s=1;s<e;s++)o.push([MARGIN+(s-.5+2/3)*t/e,MARGIN,t/e]);for(s=0;s<r;s++)o.push([MARGIN+t,MARGIN+(s-.5+2/3)*n/r,n/r]);for(s=0;s<e;s++)o.push([MARGIN+(e-(s-.5+2/3))*t/e,MARGIN+n,t/e]);for(s=0;s<r;s++)o.push([MARGIN,MARGIN+(r-(s-.5+2/3))*n/r,n/r]);return o.push([MARGIN+(2/3-.5)*t/e,MARGIN,t/e]),o.map(t=>[Math.floor(t[0]),Math.floor(t[1]),Math.floor(t[2])])}function initCursorScreen(){const t=document.createElement("div");return t.id="cursor-screen",t.style.position="fixed",t.style.left="0",t.style.top="0",t.style.width="100%",t.style.height="100%",t.style.overflow="hidden",t.style.zIndex="99999999999999999999999",t.style.pointerEvents="none",document.body.appendChild(t),t}function setRandomPoints(){for(var t=0;t<this.curves;t++)if(Math.random()<RANDOM_POSIBILITY){var n=2*Math.random()*Math.PI,o=Math.random()*this.curveEnds[t][2]*RANDOM_DIST_FACT;this.randomEnds[t]=[Math.floor(this.curveEnds[t][0]+Math.sin(n)*o),Math.floor(this.curveEnds[t][1]+Math.cos(n)*o)],n=2*Math.random()*Math.PI,o=Math.random()*this.curveControlPoints[t][2]*RANDOM_DIST_FACT,this.randomControlPoints[t]=[Math.floor(this.curveControlPoints[t][0]+Math.sin(n)*o),Math.floor(this.curveControlPoints[t][1]+Math.cos(n)*o)]}}function getBorderPathString(){const t=[2*this.randomEnds[0][0]-this.randomControlPoints[this.curves-1][0],2*this.randomEnds[0][1]-this.randomControlPoints[this.curves-1][1]];for(var n="M"+this.randomEnds[0][0]+","+this.randomEnds[0][1]+" C"+t[0]+","+t[1]+" "+this.randomControlPoints[0][0]+","+this.randomControlPoints[0][1]+" "+this.randomEnds[1][0]+","+this.randomEnds[1][1]+" ",o=1;o<this.curves;o++)n=n+"S"+this.randomControlPoints[o][0]+","+this.randomControlPoints[o][1]+" "+this.randomEnds[(o+1)%this.curves][0]+","+this.randomEnds[(o+1)%this.curves][1]+" ";return n}function startAnimation(){this.borderPath,this.getBorderPathString(),this.setRandomPoints;mySetInterval.call(this,function(){this.setRandomPoints();const t=this.getBorderPathString();this.borderPath.animate({d:t},ANIMATION_TIME,mina.linear)},INTERVAL)}function incrementLength(t,n,o){const e=Math.floor(t);return Math.floor(n+o+t)%e}function stopCursorColorAnim(){animatedCursor.borderPath.inAnim().filter(t=>t.anim.attr.fill).forEach(t=>t.stop())}function interact(t,n,o){const e=n.snap.node.getBoundingClientRect(),r=t.pageX-e.left-document.documentElement.scrollLeft,s=t.pageY-e.top-document.documentElement.scrollTop,i=Snap.closestPoint(n.borderPath,n.curves,r,s);if(i.distance>MAX_EFFECT_DISTANCE)n.mouseHoverPath&&(n.mouseHoverPath.remove(),n.mouseHoverPath=null),drawId++;else{const t=n.borderPath.getTotalLength(),o=Math.min(Math.max(150-2*i.distance,30),100,n.width,n.height),e=n.borderPath.getPointAtLength(incrementLength(t,i.length,-o));var a=Snap.rad(e.alpha);const d=[e.x-30*Math.cos(a),e.y-30*Math.sin(a)],l=n.borderPath.getPointAtLength(incrementLength(t,i.length,o));a=Snap.rad(l.alpha);const m=[l.x+30*Math.cos(a),l.y+30*Math.sin(a)],c=Snap.len(e.x,e.y,l.x,l.y),u=[(-e.y+l.y)/c,(e.x-l.x)/c],M=(i.distance+CURSOR_SIZE/2)*u[0],C=(i.distance+CURSOR_SIZE/2)*u[1],R=Snap.closestPoint(animatedCursor.borderPath,animatedCursor.curves,M+CURSOR_SIZE/2+MARGIN,C+CURSOR_SIZE/2+MARGIN),I=Math.min(Math.max(i.distance,0),100),A=animatedCursor.borderPath.getTotalLength(),P=animatedCursor.borderPath.getPointAtLength(incrementLength(A,R.length,-I)),f=animatedCursor.borderPath.getPointAtLength(incrementLength(A,R.length,I)),p=[P.x+r-CURSOR_SIZE/2-MARGIN,P.y+s-CURSOR_SIZE/2-MARGIN];a=Snap.rad(P.alpha);const g=[p[0]+30*Math.cos(a),p[1]+30*Math.sin(a)],S=[f.x+r-CURSOR_SIZE/2-MARGIN,f.y+s-CURSOR_SIZE/2-MARGIN];a=Snap.rad(f.alpha);const v=[S[0]-30*Math.cos(a),S[1]-30*Math.sin(a)],E=Math.min(n.width/2,n.height/2);a=Snap.rad(e.alpha);const N=[e.x+E*Math.sin(a),e.y-E*Math.cos(a)];a=Snap.rad(l.alpha);const _=[l.x+E*Math.sin(a),l.y-E*Math.cos(a)];var h="M"+N[0]+","+N[1]+" L"+e.x+","+e.y+" C"+d[0]+","+d[1]+" "+g[0]+","+g[1]+" "+p[0]+","+p[1]+" L"+S[0]+","+S[1]+" C"+v[0]+","+v[1]+" "+m[0]+","+m[1]+" "+l.x+","+l.y+" L"+_[0]+","+_[1];n.mouseHoverPath?n.mouseHoverPath.attr({d:h}):(n.mouseHoverPath=n.snap.path(h),n.mouseHoverPath.attr({fill:COLOR,stroke:"none"}))}i.distance>CHANGE_COLOR_AT?r>MARGIN&&r<MARGIN+n.width&&s>MARGIN&&s<MARGIN+n.height&&animatedCursor.colored&&(stopCursorColorAnim(),animatedCursor.borderPath.animate({fill:"#fff"},200),animatedCursor.colored=!1):animatedCursor.colored||(stopCursorColorAnim(),animatedCursor.borderPath.animate({fill:COLOR},200),animatedCursor.colored=!0),drawId==o?window.requestAnimationFrame(function(){interact(t,n,o)}):n.mouseHoverPath&&(n.mouseHoverPath.remove(),n.mouseHoverPath=null)}function enableMoving(){const t=animatedCursor.screenElement,n=animatedCursor.snap.node;document.documentElement.onmousemove=function(o){animatedCursor.x=o.pageX-document.documentElement.scrollLeft;const e=animatedCursor.x-t.getBoundingClientRect().left;animatedCursor.y=o.pageY-document.documentElement.scrollTop;const r=animatedCursor.y-t.getBoundingClientRect().top;n.style.left=e-CURSOR_SIZE/2-MARGIN+"px",n.style.top=r-CURSOR_SIZE/2-MARGIN+"px"}}function AnimatedElement(t){const n=t.clientWidth,o=t.clientHeight;this.width=n,this.height=o,this.element=t,this.snap=initSnap(t,n,o,!1),this.curveEnds=initCurveEnds(n,o),this.randomEnds=this.curveEnds.slice(),this.curves=this.curveEnds.length,this.curveControlPoints=initCurveControlPoints(n,o),this.randomControlPoints=this.curveControlPoints.slice(),this.setRandomPoints=setRandomPoints,this.setRandomPoints(),this.getBorderPathString=getBorderPathString,this.borderPath=this.snap.path(this.getBorderPathString()),this.borderPath.attr({fill:COLOR,stroke:"none"}),this.mouseHoverPath=null,this.startAnimation=startAnimation,this.element.onmousemove=(t=>{drawId++,owner=this,window.requestAnimationFrame(function(){interact(t,owner,drawId)})}),this.element.onmouseleave=(t=>{drawId++,animatedCursor.colored||(stopCursorColorAnim(),animatedCursor.borderPath.attr({fill:COLOR}),animatedCursor.colored=!0)})}function AnimatedCursor(){this.screenElement=initCursorScreen(),this.snap=initSnap(this.screenElement,CURSOR_SIZE,CURSOR_SIZE,!0),this.curveEnds=initCurveEnds(CURSOR_SIZE,CURSOR_SIZE),this.randomEnds=this.curveEnds.slice(),this.curves=this.curveEnds.length,this.curveControlPoints=initCurveControlPoints(CURSOR_SIZE,CURSOR_SIZE),this.randomControlPoints=this.curveControlPoints.slice(),this.setRandomPoints=setRandomPoints,this.setRandomPoints(),this.getBorderPathString=getBorderPathString,this.borderPath=this.snap.path(this.getBorderPathString()),this.borderPath.attr({fill:COLOR,stroke:"none"}),this.colored=!0,this.startAnimation=startAnimation,this.enableMoving=enableMoving}mySetInterval=function(t,n){var o=this,e=Array.prototype.slice.call(arguments,2);return window.setInterval(t instanceof Function?function(){t.apply(o,e)}:t,n)},Snap.closestPoint=function(t,n,o,e){function r(t){var n=t.x-o,r=t.y-e;return n*n+r*r}var s,i,a=t.node,h=a.getTotalLength(),d=h/n*.5,l=1/0;cnt=0;for(var m,c,u=0;u<=h;u+=d)(c=r(m=a.getPointAtLength(Math.min(u,h-1))))<l&&(s=m,i=u,l=c),cnt++;for(d*=.5;d>.5;){var M,C,R,I,A,P;(R=i-d)>=0&&(A=r(M=a.getPointAtLength(R)))<l?(s=M,i=R,l=A):(I=i+d)<=h&&(P=r(C=a.getPointAtLength(I)))<l?(s=C,i=I,l=P):d*=.5,cnt++}return s={x:s.x,y:s.y,length:i,distance:Math.sqrt(l)}};var drawId=0;const animatedCursor=new AnimatedCursor;function main(){initAnimatedElements();animatedCursor.startAnimation(),animatedCursor.enableMoving()}main();